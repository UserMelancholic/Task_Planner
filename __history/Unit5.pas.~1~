unit Unit5;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, ExtDlgs;

type
  TForm5 = class(TForm)
    OpenTextFileDialog1: TOpenTextFileDialog;
    SaveTextFileDialog1: TSaveTextFileDialog;
    Memo1: TMemo;
    Button1: TButton;
    Button2: TButton;
    Button3: TButton;
    ListBox1: TListBox;
    procedure Button1Click(Sender: TObject);
    procedure Button2Click(Sender: TObject);
    procedure Button3Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form5: TForm5;

implementation

{$R *.dfm}

procedure TForm5.Button1Click(Sender: TObject);
begin
{    if FileExists('MyFormPos.txt') then
    begin
     ListBox1.Items.LoadFromFile('MyFormPos.txt');
     Form1.Left:=StrToInt(ListBox1.Items[0]);
     Form1.Top:=StrToInt(ListBox1.Items[1]);
    end ;
}
  if FileExists( ExtractFilePath(ParamStr(0))+'Data\TaskList.txt' ) then begin  // проверка существования файла
//    ListBox1.Items.LoadFromFile( ExtractFilePath(ParamStr(0))+'Data\TaskList.txt' );
//    if opendialog1.execute then memo1.Lines.LoadFromFile(opendialog1.file)
    Memo1.Lines.LoadFromFile( ExtractFilePath(ParamStr(0))+'Data\TaskList.txt' )
  end;
end;

procedure TForm5.Button2Click(Sender: TObject);
begin
//  ListBox1.Items.SaveToFile( ExtractFilePath(ParamStr(0))+'Data\TaskList.txt' );
//if SaveDialog1.Execute then
//  Memo1.Lines.SaveToFile(SaveDialog1.FileName+'.txt');
  if Application.MessageBox('Вы уверены, что хотите записать в файл этот список задач ?', 'Внимание', MB_ICONQUESTION+MB_YESNO+MB_DEFBUTTON2)=idYes then
    Memo1.Lines.SaveToFile( ExtractFilePath(ParamStr(0))+'Data\TaskList.txt' );
end;

procedure TForm5.Button3Click(Sender: TObject);
begin
  // Вывод запроса на подтверждение удаления
//MessageBox(handle, PChar('текст'),PChar('заголовок'), MB_ICONSTOP+MB_YESNOCANCEL+MB_DEFBUTTON2);
  if Application.MessageBox('Вы уверены, что хотите очистить список ?', 'Внимание', MB_ICONQUESTION+MB_YESNO+MB_DEFBUTTON2)=idYes then
    Memo1.Clear;
end;

end.
